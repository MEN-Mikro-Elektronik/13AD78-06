<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - AD78/PUx MDIS Driver - Example Documentation</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">AD78/PUx MDIS Driver &nbsp; </h1>
	<h3>Example Documentation</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>pu05_ctrl.c</h1><div class="fragment"><pre><span class="comment">/*********************  P r o g r a m  -  M o d u l e ***********************/</span>
<span class="comment">/*-------------------------------[ History ]---------------------------------</span>
<span class="comment"> *</span>
<span class="comment"> * $Log: pu05_ctrl.c,v $</span>
<span class="comment"> * Revision 1.4  2009/09/01 09:47:00  MRoth</span>
<span class="comment"> * R: MDVE warnings</span>
<span class="comment"> * M: removed unused global variables</span>
<span class="comment"> *</span>
<span class="comment"> * Revision 1.3  2009/08/31 14:35:49  MRoth</span>
<span class="comment"> * R: Porting to MDIS5</span>
<span class="comment"> * M: added support for 64bit (MDIS_PATH)</span>
<span class="comment"> *</span>
<span class="comment"> * Revision 1.2  2009/04/23 17:35:28  ts</span>
<span class="comment"> * R: possibility for changing limits on all outputs was missing</span>
<span class="comment"> * M: added arguments for channel select and current/volt limit values</span>
<span class="comment"> *    and functions</span>
<span class="comment"> *</span>
<span class="comment"> * Revision 1.1  2009/04/06 13:19:54  ts</span>
<span class="comment"> * R: Initial Revision, first working version reading from PU5</span>
<span class="comment"> *</span>
<span class="comment"> *</span>
<span class="comment"> *---------------------------------------------------------------------------</span>
<span class="comment"> * (c) Copyright 2009 by MEN mikro elektronik GmbH, Nuernberg, Germany</span>
<span class="comment"> ****************************************************************************/</span>
<span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<span class="preprocessor">#include &lt;MEN/men_typs.h&gt;</span>
<span class="preprocessor">#include &lt;MEN/usr_oss.h&gt;</span>
<span class="preprocessor">#include &lt;MEN/usr_utl.h&gt;</span>
<span class="preprocessor">#include &lt;MEN/mdis_api.h&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="ad78__drv_8h.html">MEN/ad78_drv.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="ad78c_8h.html">MEN/ad78c.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="pu05c_8h.html">MEN/pu05c.h</a>&gt;</span>

<span class="comment">/*--------------------------------------+</span>
<span class="comment">|   GLOBALS                             |</span>
<span class="comment">+--------------------------------------*/</span>
<span class="keyword">static</span> <a class="code" href="ad78__drv_8h.html#a35">MDIS_PATH</a> G_Path;
<span class="keyword">static</span> <span class="keywordtype">char</span> *G_rail[3]={<span class="stringliteral">" 3.3V "</span>,   <span class="comment">/* helper, maps channel to output rail */</span>
                        <span class="stringliteral">"   5V "</span>,
                        <span class="stringliteral">"  12V "</span>};

<span class="comment">/*--------------------------------------+</span>
<span class="comment">|   DEFINES                             |</span>
<span class="comment">+--------------------------------------*/</span>
<span class="preprocessor">#define NONE        -1</span>
<span class="preprocessor"></span><span class="preprocessor">#define CHAN_MAX    3</span>
<span class="preprocessor"></span>
<span class="comment">/* more compact error handling */</span>
<span class="preprocessor">#define CHK(expression,errst)       \</span>
<span class="preprocessor">    if((expression)&lt;0) {            \</span>
<span class="preprocessor">        PrintMdisError(errst);      \</span>
<span class="preprocessor">        goto abort;                 \</span>
<span class="preprocessor">    }</span>
<span class="preprocessor"></span>
<span class="preprocessor">#define CHK_CHAN(expression)                                                \</span>
<span class="preprocessor">    if( expression ) {                      \</span>
<span class="preprocessor">        printf("*** to set a limit pass a valid output rail! (-r=0..2)\n"); \</span>
<span class="preprocessor">            goto abort;                                                     \</span>
<span class="preprocessor">    }</span>
<span class="preprocessor"></span>

<span class="comment">/*--------------------------------------+</span>
<span class="comment">|   PROTOTYPES                          |</span>
<span class="comment">+--------------------------------------*/</span>
<span class="keyword">static</span> <span class="keywordtype">void</span> <a name="a43"></a><a class="code" href="ad78__ctrl_8c.html#a5">usage</a>(<span class="keywordtype">void</span>);
<span class="keyword">static</span> <span class="keywordtype">void</span> <a name="a44"></a><a class="code" href="ad78__ctrl_8c.html#a6">PrintMdisError</a>(<span class="keywordtype">char</span> *info);
<span class="keyword">static</span> <span class="keywordtype">int</span> <a name="a45"></a><a class="code" href="ad78__ctrl_8c.html#a8">ShowIo</a>(<span class="keywordtype">void</span>);


<span class="comment">/********************************* usage ***********************************/</span>
<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ad78__ctrl_8c.html#a5">usage</a>(<span class="keywordtype">void</span>)
{
    printf(<span class="stringliteral">"Usage: pu05_ctrl [&lt;opts&gt;] &lt;device&gt; [&lt;opts&gt;]\n"</span>);
    printf(<span class="stringliteral">"Function: Control extra functions in PU05 which are not part\n"</span>);
    printf(<span class="stringliteral">"          of AD78 tools.\n"</span>);
    printf(<span class="stringliteral">"Options:\n"</span>);
    printf(<span class="stringliteral">"  device   device name\n"</span>);
    printf(<span class="stringliteral">" -g        get current settings\n"</span>);
    printf(<span class="stringliteral">" --- limit settings ---\n"</span>);
    printf(<span class="stringliteral">" -r=&lt;rail&gt; power rail to apply setting to:   0=3,3V 1=5V 2=12V\n"</span>);
    printf(<span class="stringliteral">" -V=&lt;volt&gt; set high voltage limit of rail -r              [mV]\n"</span>);
    printf(<span class="stringliteral">" -v=&lt;volt&gt; set low voltage limit of rail -r               [mV]\n"</span>);
    printf(<span class="stringliteral">" -I=&lt;volt&gt; set high current limit of rail -r              [mA]\n"</span>);
    printf(<span class="stringliteral">" -i=&lt;volt&gt; set low current limit of rail -r               [mA]\n"</span>);
    printf(<span class="stringliteral">" -l        display currents/voltages/temperature in a loop \n"</span>);
    printf(<span class="stringliteral">"\n"</span>);
    printf(<span class="stringliteral">"(c) 2009 by MEN mikro elektronik GmbH\n\n"</span>);
}


<span class="comment">/********************************* main ************************************/</span>
<span class="keyword">static</span> int32 <a name="a46"></a><a class="code" href="pu05__ctrl_8c.html#a9">showInfo</a>(<span class="keywordtype">void</span>)
{
    int32 val = 0;
    printf(<span class="stringliteral">"current settings:\n"</span>);

    <span class="comment">/* Wake ON Time */</span>
    <a name="a47"></a><a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a name="a48"></a><a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, AD78_WOT, &amp;val)), <span class="stringliteral">"AD78_WOT"</span>);
    printf(<span class="stringliteral">" WOT (wake-on time)              : %dmin\n"</span>, val);

    <span class="comment">/* ON Acknowledge Timeout */</span>
    <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, AD78_ONACK_TOUT, &amp;val)), <span class="stringliteral">"AD78_ONACK_TOUT"</span>);
    printf(<span class="stringliteral">" ON acknowledge timeout          : %dsec\n"</span>,
           <a name="a49"></a><a class="code" href="group____AD78C__ONACK__TOUT.html#a0">AD78C_ONACK_TOUT_SEC</a>( val ));

    <span class="comment">/* Number of missing ON Acknowledges */</span>
    <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, AD78_ONACK_ERR, &amp;val)), <span class="stringliteral">"AD78_ONACK_ERR"</span>);
    printf(<span class="stringliteral">" missing ON acknowledges         : %d\n"</span>, val);

    <span class="comment">/* Number of missing watchdog triggers */</span>
    <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, AD78_WDOG_ERR, &amp;val)), <span class="stringliteral">"AD78_WDOG_ERR"</span>);
    printf(<span class="stringliteral">" missing watchdog triggers       : %d\n"</span>, val);

    <span class="comment">/* Shutdown delay */</span>
    <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, AD78_DOWN_DELAY, &amp;val)), <span class="stringliteral">"AD78_DOWN_DELAY"</span>);
    printf(<span class="stringliteral">" shutdown delay                  : %dmin\n"</span>,
           <a name="a50"></a><a class="code" href="group____AD78C__DOWN__DELAY.html#a0">AD78C_DOWN_DELAY_MIN</a>( val ));

    <span class="comment">/* Off delay */</span>
    <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, AD78_OFF_DELAY, &amp;val)), <span class="stringliteral">"AD78_OFF_DELAY"</span>);
    printf(<span class="stringliteral">" off delay                       : %dmin\n"</span>,
           <a name="a51"></a><a class="code" href="group____AD78C__OFF__DELAY.html#a0">AD78C_OFF_DELAY_MIN</a>(val));

    <span class="comment">/* Shutdown event flag*/</span>
    <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, AD78_DOWN_EVT, &amp;val)), <span class="stringliteral">"AD78_DOWN_EVT"</span>);
    printf(<span class="stringliteral">"- shutdown event flag            : %d\n"</span>, val);


    <span class="keywordflow">return</span>(0);
abort:
    <span class="keywordflow">return</span>(1);

} <span class="comment">/* info */</span>


<span class="comment">/********************************* main ************************************/</span>
<span class="keywordtype">int</span> <a name="a52"></a><a class="code" href="ad78__win_8c.html#a14">main</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])
{
    <span class="keywordtype">char</span>    *device,*str,*errstr,buf[40];
    int32   n;
    int32   tempHigh;
    int32   arg_info, arg_out, arg_volt_low, arg_volt_high,
        arg_curr_low,arg_curr_high, arg_loop;

    <span class="comment">/*--------------------+</span>
<span class="comment">    |  check arguments    |</span>
<span class="comment">    +--------------------*/</span>

    <span class="keywordflow">if</span>( (errstr = UTL_ILLIOPT(<span class="stringliteral">"lgi=I=r=v=V=T=?"</span>, buf)) ){ <span class="comment">/* check args */</span>
        printf(<span class="stringliteral">"*** %s\n"</span>, errstr);
        <span class="keywordflow">return</span>(1);
    }

    <span class="keywordflow">if</span>( UTL_TSTOPT(<span class="stringliteral">"?"</span>) ){                      <span class="comment">/* help requested ? */</span>
        <a class="code" href="ad78__ctrl_8c.html#a5">usage</a>();
        <span class="keywordflow">return</span>(1);
    }

    <span class="comment">/*--------------------+</span>
<span class="comment">    |  get arguments      |</span>
<span class="comment">    +--------------------*/</span>
    <span class="keywordflow">for</span> (device=NULL, n=1; n&lt;argc; n++)
        <span class="keywordflow">if</span>( *argv[n] != <span class="charliteral">'-'</span> ){
            device = argv[n];
            <span class="keywordflow">break</span>;
        }

    <span class="keywordflow">if</span>( !device || argc&lt;3 ) {
        <a class="code" href="ad78__ctrl_8c.html#a5">usage</a>();
        <span class="keywordflow">return</span>(1);
    }

    arg_info        = (UTL_TSTOPT(<span class="stringliteral">"g"</span>) ? 1 : <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a>);
    arg_loop        = (UTL_TSTOPT(<span class="stringliteral">"l"</span>) ? 1 : <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a>);
    arg_out         = ((str = UTL_TSTOPT(<span class="stringliteral">"r="</span>)) ? atoi(str) : <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a>);
    arg_volt_low    = ((str = UTL_TSTOPT(<span class="stringliteral">"v="</span>)) ? atoi(str) : <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a>);
    arg_volt_high   = ((str = UTL_TSTOPT(<span class="stringliteral">"V="</span>)) ? atoi(str) : <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a>);
    arg_curr_low    = ((str = UTL_TSTOPT(<span class="stringliteral">"i="</span>)) ? atoi(str) : <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a>);
    arg_curr_high   = ((str = UTL_TSTOPT(<span class="stringliteral">"I="</span>)) ? atoi(str) : <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a>);
    tempHigh        = ((str = UTL_TSTOPT(<span class="stringliteral">"T="</span>)) ? atoi(str) : <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a>);

    <span class="comment">/* -- open path  -- */</span>
    <span class="keywordflow">if</span>( (G_Path = <a name="a53"></a><a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a5">M_open</a>(device)) &lt; 0) {
        <a class="code" href="ad78__ctrl_8c.html#a6">PrintMdisError</a>(<span class="stringliteral">"open"</span>);
        <span class="keywordflow">return</span>(1);
    }

    <span class="comment">/* -- change a limit -- */</span>
    <span class="keywordflow">if</span>( arg_volt_low != <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a> ) {
        <a name="a54"></a><a class="code" href="pu05__ctrl_8c.html#a3">CHK_CHAN</a>( (arg_out == NONE) || (arg_out &gt;= CHAN_MAX) );
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>((<a name="a55"></a><a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a14">M_setstat</a>(G_Path, M_MK_CH_CURRENT, arg_out)), <span class="stringliteral">"M_MK_CH_CURRENT"</span> );
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>((<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a14">M_setstat</a>(G_Path, PU05_VOLT_LOW, arg_volt_low)), <span class="stringliteral">"PU05_VOLT_LOW"</span> );
        printf(<span class="stringliteral">"Set low voltage limit on%srail to %d mV\n"</span>,
               G_rail[arg_out], arg_volt_low );
    }

    <span class="keywordflow">if</span>( arg_volt_high != <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a> ) {
        <a class="code" href="pu05__ctrl_8c.html#a3">CHK_CHAN</a>( (arg_out == NONE) || (arg_out &gt;= CHAN_MAX) );
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>((<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a14">M_setstat</a>(G_Path, M_MK_CH_CURRENT, arg_out)), <span class="stringliteral">"M_MK_CH_CURRENT"</span> );
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>((<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a14">M_setstat</a>(G_Path, PU05_VOLT_HIGH, arg_volt_high)),
            <span class="stringliteral">"PU05_VOLT_HIGH"</span>);
        printf(<span class="stringliteral">"Set high voltage limit on%srail to %d mV\n"</span>,
               G_rail[arg_out], arg_volt_low );
    }

    <span class="keywordflow">if</span>( arg_curr_low != <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a> ) {
        <a class="code" href="pu05__ctrl_8c.html#a3">CHK_CHAN</a>( (arg_out == NONE) || (arg_out &gt;= CHAN_MAX) );
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>((<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a14">M_setstat</a>(G_Path, M_MK_CH_CURRENT, arg_out)), <span class="stringliteral">"M_MK_CH_CURRENT"</span> );
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>((<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a14">M_setstat</a>(G_Path, PU05_CURR_LOW, arg_curr_low)), <span class="stringliteral">"PU05_CURR_LOW"</span> );
        printf(<span class="stringliteral">"Set low current limit on%srail to %d mA\n"</span>,
               G_rail[arg_out], arg_curr_low );
    }

    <span class="keywordflow">if</span>( arg_curr_high != <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a> ) {
        <a class="code" href="pu05__ctrl_8c.html#a3">CHK_CHAN</a>( (arg_out == NONE) || (arg_out &gt;= CHAN_MAX) );
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>((<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a14">M_setstat</a>(G_Path, M_MK_CH_CURRENT, arg_out)), <span class="stringliteral">"M_MK_CH_CURRENT"</span> );
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>((<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a14">M_setstat</a>(G_Path, PU05_CURR_HIGH, arg_curr_high)),
            <span class="stringliteral">"PU05_CURR_HIGH"</span>);
        printf(<span class="stringliteral">"Set high current limit on%srail to %d mA\n"</span>,
               G_rail[arg_out], arg_curr_low );
    }

    <span class="comment">/* -- current settings -- */</span>
    <span class="keywordflow">if</span>( arg_info != <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a> )
        <a class="code" href="pu05__ctrl_8c.html#a9">showInfo</a>();

    <span class="comment">/* -- show info in loop -- */</span>
    <span class="keywordflow">if</span>( arg_loop != <a class="code" href="ad78__ctrl_8c.html#a0">NONE</a>  ) {
        printf(<span class="stringliteral">"--- press any key to abort ---\n"</span>);
        <span class="keywordflow">do</span> {    <span class="comment">/* repeat until keypress */</span>
            <span class="keywordflow">if</span>( <a class="code" href="ad78__ctrl_8c.html#a8">ShowIo</a>() )
                <span class="keywordflow">goto</span> abort;

            UOS_Delay(1000);
        } <span class="keywordflow">while</span>( (UOS_KeyPressed() == -1) );
    }

    <span class="comment">/* --  cleanup -- */</span>
    <span class="keywordflow">if</span>( <a name="a56"></a><a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a10">M_close</a>(G_Path) &lt; 0 )
        <a class="code" href="ad78__ctrl_8c.html#a6">PrintMdisError</a>(<span class="stringliteral">"close"</span>);

    <span class="keywordflow">return</span>(0);
abort:
    <span class="keywordflow">return</span>(1);

}

<span class="comment">/********************************* PrintMdisError **************************/</span>
<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ad78__ctrl_8c.html#a6">PrintMdisError</a>(<span class="keywordtype">char</span> *info)
{
    printf(<span class="stringliteral">"*** can't %s: %s\n"</span>, info, <a name="a57"></a><a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api__specification_8c.html#a8">M_errstring</a>(UOS_ErrnoGet()));
}


<span class="comment">/********************************* ShowIo **********************************/</span>
<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ad78__ctrl_8c.html#a8">ShowIo</a>( <span class="keywordtype">void</span> )
{
    int32   val, chan;
    <span class="comment">/* temp */</span>
    <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, AD78_TEMP, &amp;val)), <span class="stringliteral">"AD78_TEMP"</span>);
    printf(<span class="stringliteral">"\n\ntemperature              : %d degree celsius\n"</span>, val);

    <span class="comment">/* temp high limit */</span>
    <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>((<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, AD78_TEMP_HIGH, &amp;val)), <span class="stringliteral">"AD78_TEMP_HIGH"</span>);
    printf(<span class="stringliteral">"temperature high limit   : %d degree celsius\n"</span>, val);

    <span class="keywordflow">for</span> (chan=0; chan &lt;=2; chan++) {
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a14">M_setstat</a>(G_Path, M_MK_CH_CURRENT, chan)), <span class="stringliteral">"M_MK_CH_CURRENT"</span>);
        printf(<span class="stringliteral">"--%s rail values: --\n"</span>, G_rail[chan]);
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, PU05_VOLT, &amp;val)), <span class="stringliteral">"PU05_VOLT"</span>);
        printf(<span class="stringliteral">"voltage: %05d mV "</span>, val);
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, PU05_VOLT_LOW, &amp;val)), <span class="stringliteral">"PU05_VOLT_LOW"</span>);
        printf(<span class="stringliteral">"low limit: %05d mV "</span>, val);
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, PU05_VOLT_HIGH, &amp;val)), <span class="stringliteral">"PU05_VOLT_HIGH"</span>);
        printf(<span class="stringliteral">"high limit: %05d mV\n"</span>, val);
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, PU05_CURR, &amp;val)), <span class="stringliteral">"PU05_CURR"</span>);
        printf(<span class="stringliteral">"current: %05d mA "</span>, val);
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, PU05_CURR_LOW, &amp;val)), <span class="stringliteral">"PU05_CURR_LOW"</span>);
        printf(<span class="stringliteral">"low limit: %05d mA "</span>, val);
        <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, PU05_CURR_HIGH, &amp;val)), <span class="stringliteral">"PU05_CURR_HIGH"</span>);
        printf(<span class="stringliteral">"high limit: %05d mA\n"</span>, val);
    }
    <a class="code" href="pu05__ctrl_8c.html#a2">CHK</a>( (<a class="codeRef" doxygen="mdis_api.tag:../../../../../LIBSRC/MDIS_API/DOC/html/" href="../../../../../LIBSRC/MDIS_API/DOC/html/mdis__api_8c.html#a13">M_getstat</a>(G_Path, PU05_POWER, &amp;val)), <span class="stringliteral">"PU05_POWER"</span>);
    printf(<span class="stringliteral">"output power: %d W\n"</span>, val);


    <span class="keywordflow">return</span>(0);
abort:
    <span class="keywordflow">return</span>(-1);
}

</pre></div> 
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for AD78/PUx MDIS Driver using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2010 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

