<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - AD78/PUx MDIS Driver - ad78c.h Source File</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">AD78/PUx MDIS Driver &nbsp; </h1>
	<h3>ad78c.h Source File</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>ad78c.h</h1><a href="ad78c_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/***********************  I n c l u d e  -  F i l e  ************************/</span>
00013 <span class="comment">/*-------------------------------[ History ]---------------------------------</span>
00014 <span class="comment"> *</span>
00015 <span class="comment"> * $Log: ad78c.h,v $</span>
00016 <span class="comment"> * Revision 1.5  2010/02/24 11:04:12  ts</span>
00017 <span class="comment"> * R: Temperature protection switched off too early</span>
00018 <span class="comment"> * M: increased limit to 105 degree, climate chamber tested</span>
00019 <span class="comment"> *</span>
00020 <span class="comment"> * Revision 1.4  2009/09/04 11:41:34  MRoth</span>
00021 <span class="comment"> * R: MDVE warning</span>
00022 <span class="comment"> * M: fixed AD78C_DOWN_DELAY_MIN2MODE makro</span>
00023 <span class="comment"> *</span>
00024 <span class="comment"> * Revision 1.3  2006/07/21 10:09:33  DPfeuffer</span>
00025 <span class="comment"> * added defines and macros for temperature and voltage computation</span>
00026 <span class="comment"> *</span>
00027 <span class="comment"> * Revision 1.2  2006/05/26 15:08:32  DPfeuffer</span>
00028 <span class="comment"> * cosmetics</span>
00029 <span class="comment"> *</span>
00030 <span class="comment"> * Revision 1.1  2006/05/24 16:20:51  ag</span>
00031 <span class="comment"> * Initial Revision</span>
00032 <span class="comment"> *</span>
00033 <span class="comment"> *---------------------------------------------------------------------------</span>
00034 <span class="comment"> * (c) Copyright 2006 by MEN Mikro Elektronik GmbH, Nuremberg, Germany</span>
00035 <span class="comment"> ****************************************************************************/</span>
00036 
00037 <span class="preprocessor">#ifndef _AD78C_H</span>
00038 <span class="preprocessor"></span><span class="preprocessor">#define _AD78C_H</span>
00039 <span class="preprocessor"></span>
00040 <span class="preprocessor">#ifdef __cplusplus</span>
00041 <span class="preprocessor"></span>    <span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00042 <span class="preprocessor">#endif</span>
00043 <span class="preprocessor"></span>
00044 
00045 <span class="comment">/*--------------------------------------+</span>
00046 <span class="comment">|   DEFINES                             |</span>
00047 <span class="comment">+--------------------------------------*/</span>
00048 
<a name="l00051"></a><a class="code" href="group____AD78C.html#a0">00051</a> <span class="preprocessor">#   define AD78C_FLAG               0x01    </span>
<a name="l00053"></a><a class="code" href="group____AD78C.html#a1">00053</a> <span class="preprocessor">#define AD78C_WOT_L             0x00    </span>
<a name="l00054"></a><a class="code" href="group____AD78C.html#a2">00054</a> <span class="preprocessor">#define AD78C_WOT_H             0x01    </span>
<a name="l00056"></a><a class="code" href="group____AD78C.html#a3">00056</a> <span class="preprocessor">#define AD78C_ONACK             0x02    </span>
<a name="l00057"></a><a class="code" href="group____AD78C.html#a4">00057</a> <span class="preprocessor">#define AD78C_ONACK_TOUT        0x03    </span>
<a name="l00058"></a><a class="code" href="group____AD78C.html#a5">00058</a> <span class="preprocessor">#define AD78C_ONACK_ERR         0x04    </span>
<a name="l00060"></a><a class="code" href="group____AD78C.html#a6">00060</a> <span class="preprocessor">#define AD78C_WDOG_STATE        0x05    </span>
<a name="l00061"></a><a class="code" href="group____AD78C.html#a7">00061</a> <span class="preprocessor">#   define AD78C_WDOG_OFF           0x00    </span>
<a name="l00062"></a><a class="code" href="group____AD78C.html#a8">00062</a> <span class="preprocessor">#   define AD78C_WDOG_ON            0x01    </span>
<a name="l00064"></a><a class="code" href="group____AD78C.html#a9">00064</a> <span class="preprocessor">#define AD78C_WDOG_TRIG         0x06    </span>
<a name="l00066"></a><a class="code" href="group____AD78C.html#a10">00066</a> <span class="preprocessor">#define AD78C_WDOG_TOUT         0x07    </span>
<a name="l00067"></a><a class="code" href="group____AD78C.html#a11">00067</a> <span class="preprocessor">#   define AD78C_WDOG_TOUT_MINMODE      0x01    </span>
<a name="l00068"></a><a class="code" href="group____AD78C.html#a12">00068</a> <span class="preprocessor">#   define AD78C_WDOG_TOUT_MAXMODE      0xff    </span>
<a name="l00070"></a><a class="code" href="group____AD78C.html#a13">00070</a> <span class="preprocessor">#define AD78C_WDOG_ERR          0x08    </span>
<a name="l00071"></a><a class="code" href="group____AD78C.html#a14">00071</a> <span class="preprocessor">#define AD78C_SWOFF             0x09    </span>
<a name="l00072"></a><a class="code" href="group____AD78C.html#a15">00072</a> <span class="preprocessor">#define AD78C_OFFACK            0x0a    </span>
<a name="l00073"></a><a class="code" href="group____AD78C.html#a16">00073</a> <span class="preprocessor">#define AD78C_DOWN_DELAY        0x0b    </span>
<a name="l00074"></a><a class="code" href="group____AD78C.html#a17">00074</a> <span class="preprocessor">#define AD78C_OFF_DELAY         0x0c    </span>
<a name="l00076"></a><a class="code" href="group____AD78C.html#a18">00076</a> <span class="preprocessor">#define AD78C_STATUS            0x0d    </span>
<a name="l00077"></a><a class="code" href="group____AD78C.html#a19">00077</a> <span class="preprocessor">#   define AD78C_STATUS_DOWN_EVT        0x01    </span>
<a name="l00079"></a><a class="code" href="group____AD78C.html#a20">00079</a> <span class="preprocessor">#define AD78C_IN                0x0e    </span>
<a name="l00080"></a><a class="code" href="group____AD78C.html#a21">00080</a> <span class="preprocessor">#define AD78C_IN_MASK           0x0f    </span>
<a name="l00082"></a><a class="code" href="group____AD78C.html#a22">00082</a> <span class="preprocessor">#define AD78C_OUT               0x10    </span>
<a name="l00083"></a><a class="code" href="group____AD78C.html#a23">00083</a> <span class="preprocessor">#define AD78C_OUT_MASK          0x11    </span>
<a name="l00085"></a><a class="code" href="group____AD78C.html#a24">00085</a> <span class="preprocessor">#define AD78C_TEMP              0x12    </span>
<a name="l00087"></a><a class="code" href="group____AD78C.html#a25">00087</a> <span class="preprocessor">#define AD78C_TEMP_HIGH         0x13    </span>
<a name="l00089"></a><a class="code" href="group____AD78C.html#a26">00089</a> <span class="preprocessor">#define AD78C_VOLT              0x14    </span>
<a name="l00091"></a><a class="code" href="group____AD78C.html#a27">00091</a> <span class="preprocessor">#define AD78C_TEST1             0x77    </span>
<a name="l00092"></a><a class="code" href="group____AD78C.html#a28">00092</a> <span class="preprocessor">#   define AD78C_TEST1_NOTEST       0x00    </span>
<a name="l00093"></a><a class="code" href="group____AD78C.html#a29">00093</a> <span class="preprocessor">#   define AD78C_TEST1_TMODE1       0x61    </span>
<a name="l00097"></a><a class="code" href="group____AD78C.html#a30">00097</a> <span class="preprocessor">#define AD78C_TEST2             0x78    </span>
<a name="l00098"></a><a class="code" href="group____AD78C.html#a31">00098</a> <span class="preprocessor">#   define AD78C_TEST2_RST          0x01    </span>
<a name="l00099"></a><a class="code" href="group____AD78C.html#a32">00099</a> <span class="preprocessor">#   define AD78C_TEST2_SWON         0x02    </span>
<a name="l00101"></a><a class="code" href="group____AD78C.html#a33">00101</a> <span class="preprocessor">#define AD78C_TEST3             0x79    </span>
<a name="l00102"></a><a class="code" href="group____AD78C.html#a34">00102</a> <span class="preprocessor">#   define AD78C_TEST3_PWR          0x01    </span>
<a name="l00104"></a><a class="code" href="group____AD78C.html#a35">00104</a> <span class="preprocessor">#define AD78C_TEST4             0x7a    </span>
<a name="l00106"></a><a class="code" href="group____AD78C.html#a36">00106</a> <span class="preprocessor">#define AD78C_ID                0xfe    </span>
<a name="l00107"></a><a class="code" href="group____AD78C.html#a37">00107</a> <span class="preprocessor">#define AD78C_REV               0xff    </span>
<a name="l00118"></a><a class="code" href="group____AD78C__ONACK__TOUT.html#a0">00118</a> <span class="preprocessor">#   define AD78C_ONACK_TOUT_SEC( mode )     ((mode) ? (1&lt;&lt;((mode)-1)) : 0)</span>
00119 <span class="preprocessor"></span>
<a name="l00120"></a><a class="code" href="group____AD78C__ONACK__TOUT.html#a1">00120</a> <span class="preprocessor">#   define AD78C_ONACK_TOUT_SEC2MODE( sec, mode )   switch( sec ){          \</span>
00121 <span class="preprocessor">                                                case    1: mode= 1; break;  \</span>
00122 <span class="preprocessor">                                                case    2: mode= 2; break;  \</span>
00123 <span class="preprocessor">                                                case    4: mode= 3; break;  \</span>
00124 <span class="preprocessor">                                                case    8: mode= 4; break;  \</span>
00125 <span class="preprocessor">                                                case   16: mode= 5; break;  \</span>
00126 <span class="preprocessor">                                                case   32: mode= 6; break;  \</span>
00127 <span class="preprocessor">                                                case   64: mode= 7; break;  \</span>
00128 <span class="preprocessor">                                                case  128: mode= 8; break;  \</span>
00129 <span class="preprocessor">                                                case  256: mode= 9; break;  \</span>
00130 <span class="preprocessor">                                                case  512: mode=10; break;  \</span>
00131 <span class="preprocessor">                                                case 1024: mode=11; break;  \</span>
00132 <span class="preprocessor">                                                default: mode=0xff; }</span>
<a name="l00133"></a><a class="code" href="group____AD78C__ONACK__TOUT.html#a2">00133</a> <span class="preprocessor"></span><span class="preprocessor">#   define AD78C_ONACK_TOUT_NONE        0       </span>
<a name="l00134"></a><a class="code" href="group____AD78C__ONACK__TOUT.html#a3">00134</a> <span class="preprocessor">#   define AD78C_ONACK_TOUT_MINMODE     0       </span>
<a name="l00135"></a><a class="code" href="group____AD78C__ONACK__TOUT.html#a4">00135</a> <span class="preprocessor">#   define AD78C_ONACK_TOUT_MAXMODE     11      </span>
<a name="l00147"></a><a class="code" href="group____AD78C__DOWN__DELAY.html#a0">00147</a> <span class="preprocessor">#   define AD78C_DOWN_DELAY_MIN( mode )     ((mode) ? (1&lt;&lt;((mode)-1)) : 0)</span>
00148 <span class="preprocessor"></span>
<a name="l00149"></a><a class="code" href="group____AD78C__DOWN__DELAY.html#a1">00149</a> <span class="preprocessor">#   define AD78C_DOWN_DELAY_MIN2MODE( min, mode )   switch( min ){              \</span>
00150 <span class="preprocessor">                                                case    0:  mode=0; break;  \</span>
00151 <span class="preprocessor">                                                case    1:  mode=1; break;  \</span>
00152 <span class="preprocessor">                                                case    2:  mode=2; break;  \</span>
00153 <span class="preprocessor">                                                case    4:  mode=3; break;  \</span>
00154 <span class="preprocessor">                                                case    8:  mode=4; break;  \</span>
00155 <span class="preprocessor">                                                case   16:  mode=5; break;  \</span>
00156 <span class="preprocessor">                                                case   32:  mode=6; break;  \</span>
00157 <span class="preprocessor">                                                case   64:  mode=7; break;  \</span>
00158 <span class="preprocessor">                                                default: mode=0xff; }</span>
<a name="l00159"></a><a class="code" href="group____AD78C__DOWN__DELAY.html#a2">00159</a> <span class="preprocessor"></span><span class="preprocessor">#   define AD78C_DOWN_DELAY_MINMODE     0</span>
<a name="l00160"></a><a class="code" href="group____AD78C__DOWN__DELAY.html#a3">00160</a> <span class="preprocessor"></span><span class="preprocessor">#   define AD78C_DOWN_DELAY_MAXMODE     7</span>
00161 <span class="preprocessor"></span>
<a name="l00172"></a><a class="code" href="group____AD78C__OFF__DELAY.html#a0">00172</a> <span class="preprocessor">#   define AD78C_OFF_DELAY_MIN( mode )      ((mode) ? (1&lt;&lt;((mode)-1)) : 0)</span>
00173 <span class="preprocessor"></span>
<a name="l00174"></a><a class="code" href="group____AD78C__OFF__DELAY.html#a1">00174</a> <span class="preprocessor">#   define AD78C_OFF_DELAY_MIN2MODE( min, mode )    switch( min ){              \</span>
00175 <span class="preprocessor">                                                    case    0:  mode=0; break;  \</span>
00176 <span class="preprocessor">                                                    case    1:  mode=1; break;  \</span>
00177 <span class="preprocessor">                                                    case    2:  mode=2; break;  \</span>
00178 <span class="preprocessor">                                                    case    4:  mode=3; break;  \</span>
00179 <span class="preprocessor">                                                    case    8:  mode=4; break;  \</span>
00180 <span class="preprocessor">                                                    case   16:  mode=5; break;  \</span>
00181 <span class="preprocessor">                                                    default: mode=0xff; }</span>
<a name="l00182"></a><a class="code" href="group____AD78C__OFF__DELAY.html#a2">00182</a> <span class="preprocessor"></span><span class="preprocessor">#   define AD78C_OFF_DELAY_MINMODE  0</span>
<a name="l00183"></a><a class="code" href="group____AD78C__OFF__DELAY.html#a3">00183</a> <span class="preprocessor"></span><span class="preprocessor">#   define AD78C_OFF_DELAY_MAXMODE  5</span>
00184 <span class="preprocessor"></span>
<a name="l00186"></a><a class="code" href="group____AD78C.html#a38">00186</a> <span class="preprocessor">#define AD78C_ON_ACK_MAX_ERR        5  </span>
<a name="l00188"></a><a class="code" href="group____AD78C.html#a39">00188</a> <span class="preprocessor">#define AD78C_WDOG_MAX_ERR          5  </span>
<a name="l00191"></a><a class="code" href="group____AD78C.html#a40">00191</a> <span class="preprocessor">#define AD78C_WAIT_OFF              1000 </span>
<a name="l00196"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a0">00196</a> <span class="preprocessor">#define AD78C_ADC_REF_MV        3000    </span>
<a name="l00197"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a1">00197</a> <span class="preprocessor">#define AD78C_ADC_REF_VALUE     0xff    </span>
<a name="l00200"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a2">00200</a> <span class="preprocessor">#define AD78C_ADC2INV( adc )    ( (u_int32)( (AD78C_ADC_REF_MV * (adc)) / AD78C_ADC_REF_VALUE) )</span>
00201 <span class="preprocessor"></span>
<a name="l00203"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a3">00203</a> <span class="preprocessor">#define AD78C_INV2ADC( mV )     ( (u_int8)( (AD78C_ADC_REF_VALUE * (mV)) / AD78C_ADC_REF_MV) )</span>
00204 <span class="preprocessor"></span>
<a name="l00207"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a4">00207</a> <span class="preprocessor">#define AD78C_VOLT_FROM_INV( inVolt )   ((inVolt) * 2)</span>
00208 <span class="preprocessor"></span>
<a name="l00209"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a5">00209</a> <span class="preprocessor">#define AD78C_VOLT_FROM_ADC( adc )      (AD78C_VOLT_FROM_INV( AD78C_ADC2INV( adc ) ))</span>
00210 <span class="preprocessor"></span>
<a name="l00213"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a6">00213</a> <span class="preprocessor">#define AD78C_TEMP_FROM_INV( inVolt )   ( ((((inVolt*10) - ((inVolt &lt; 480) ? (inVolt*10) : 4800)) + 156/2) / 156) )</span>
00214 <span class="preprocessor"></span>
<a name="l00215"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a7">00215</a> <span class="preprocessor">#define AD78C_TEMP_FROM_ADC( adc )  (AD78C_TEMP_FROM_INV( AD78C_ADC2INV( adc ) ))</span>
00216 <span class="preprocessor"></span>
<a name="l00218"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a8">00218</a> <span class="preprocessor">#define AD78C_TEMP_TO_INV( c )  ( (((c) * 156) + 4800) / 10 )</span>
00219 <span class="preprocessor"></span>
<a name="l00220"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a9">00220</a> <span class="preprocessor">#define AD78C_TEMP_TO_ADC( c )  (AD78C_INV2ADC( AD78C_TEMP_TO_INV( c ) ))</span>
00221 <span class="preprocessor"></span>
<a name="l00222"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a10">00222</a> <span class="preprocessor">#define AD78C_TEMP_HIGH_MIN_C       50      </span>
<a name="l00223"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a11">00223</a> <span class="preprocessor">#define AD78C_TEMP_HIGH_MAX_C      105      </span>
<a name="l00224"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a12">00224</a> <span class="preprocessor">#define AD78C_TEMP_HIGH_MIN         AD78C_TEMP_TO_ADC( AD78C_TEMP_HIGH_MIN_C )  </span>
<a name="l00225"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a13">00225</a> <span class="preprocessor">#define AD78C_TEMP_HIGH_MAX         AD78C_TEMP_TO_ADC( AD78C_TEMP_HIGH_MAX_C )  </span>
<a name="l00226"></a><a class="code" href="group____AD78C__TEMP__VOLT.html#a14">00226</a> <span class="preprocessor">#define AD78C_TEMP_HIGH_DEFAULT     AD78C_TEMP_HIGH_MAX     </span>
00229 <span class="preprocessor"></span><span class="comment">/*--------------------------------------*/</span>
00230 <span class="comment">/*  TYPEDEFS                            */</span>
00231 <span class="comment">/*--------------------------------------*/</span>
00232 
<a name="l00234"></a><a class="code" href="group____AD78C.html#a41">00234</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> {
00235     <a class="code" href="group____AD78C.html#a41a69">SM_STATE_OFF</a>,                 
00236     <a class="code" href="group____AD78C.html#a41a70">SM_STATE_WAIT_SMB_ON_ACK</a>,     
00237     <a class="code" href="group____AD78C.html#a41a71">SM_STATE_ON</a>,                  
00238     <a class="code" href="group____AD78C.html#a41a72">SM_STATE_WAIT_SHUTDOWN_DELAY</a>, 
00239     <a class="code" href="group____AD78C.html#a41a73">SM_STATE_WAIT_OFF_DELAY</a>,      
00240     <a class="code" href="group____AD78C.html#a41a74">SM_STATE_WAIT_OFF</a>,            
00242     <a class="code" href="group____AD78C.html#a41a75">SM_STATE_ERROR_OFF</a>,           
00243     <a class="code" href="group____AD78C.html#a41a76">SM_STATE_RESET</a>                
00244 } <a class="code" href="group____AD78C.html#a41">AD78C_SM_STATES</a>;
00245 
00248 <span class="preprocessor">#ifdef __cplusplus</span>
00249 <span class="preprocessor"></span>    }
00250 <span class="preprocessor">#endif</span>
00251 <span class="preprocessor"></span>
00252 <span class="preprocessor">#endif  </span><span class="comment">/* _AD78C_H */</span>
</pre></div>
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for AD78/PUx MDIS Driver using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2010 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

